load fastworkers.mat;
close all;

% Convergence plot
figure;
hold on;
plot(cvg_ours_8cores(:,1),cvg_ours_8cores(:,2),'b-','LineWidth',2);
plot(cvg_dsgd_8cores(:,1),cvg_dsgd_8cores(:,2),'r-','LineWidth',2);
plot(cvg_gl_16cores(:,1),cvg_gl_16cores(:,2),'g--','LineWidth',2);
ylim([0.0058 0.0078]);
hold off;
xlabel('Seconds','FontSize',18);
ylabel('Objective value','FontSize',18);
legend({'Ours (8 cores)','DSGD (8 cores)','GraphLab (16 cores)'},'Location','NorthEast');
title('TM 4.8M docs: Convergence','FontSize',18);
set(gca,'FontSize',14);
print('-depsc','tm_cvg.eps');
system('epstopdf tm_cvg.eps');

% Rank plot
figure;
hold on;
plot(rank_ours_8cores(:,1),rank_ours_8cores(:,2),'b-','LineWidth',2);
plot(rank_ours_16cores(:,1),rank_ours_16cores(:,2),'b--','LineWidth',2);
plot(rank_dsgd_8cores(:,1),rank_dsgd_8cores(:,2),'r-','LineWidth',2);
plot(rank_dsgd_16cores(:,1),rank_dsgd_16cores(:,2),'r--','LineWidth',2);
plot(rank_gl_16cores(:,1),rank_gl_16cores(:,2),'g--','LineWidth',2);
hold off;
xlabel('Rank (# topics)','FontSize',18);
ylabel('Seconds to Convergence','FontSize',18);
legend({'Ours (8 cores)','Ours (16 cores)','DSGD (8 cores)','DSGD (16 cores)','GraphLab (16 cores)'},'Location','NorthWest');
title('TM 4.8M docs: Rank','FontSize',18);
set(gca,'FontSize',14);
print('-depsc','tm_rank.eps');
system('epstopdf tm_rank.eps');

% Cores plot
figure;
hold on;
plot(cores_ours(:,1),cores_ours(:,2),'b-','LineWidth',2);
plot(cores_dsgd(:,1),cores_dsgd(:,2),'r-','LineWidth',2);
plot(cores_gl(:,1),cores_gl(:,2),'g-','LineWidth',2);
hold off;
xlabel('Processor cores','FontSize',18);
ylabel('Seconds to Convergence','FontSize',18);
legend({'Ours','DSGD','GraphLab'},'Location','NorthEast');
title('TM 4.8M docs: Computation','FontSize',18);
set(gca,'FontSize',14);
print('-depsc','tm_cores.eps');
system('epstopdf tm_cores.eps');

% Data scalability plot
figure;
hold on;
plot(data_ours_8cores(:,1),data_ours_8cores(:,2),'xb-','LineWidth',2,'MarkerSize',10);
plot(data_ours_16cores(:,1),data_ours_16cores(:,2),'ob--','LineWidth',2,'MarkerSize',10);
plot(data_dsgd_16cores(:,1),data_dsgd_16cores(:,2),'or--','LineWidth',2,'MarkerSize',10);
plot(data_dsgd_24cores(:,1),data_dsgd_24cores(:,2),'dr:','LineWidth',2,'MarkerSize',10);
plot(data_gl_16cores(:,1),data_gl_16cores(:,2),'og--','LineWidth',2,'MarkerSize',10);
hold off;
xlabel('Number of documents','FontSize',18);
ylabel('Seconds to Convergence','FontSize',18);
legend({'Ours (8 cores)','Ours (16 cores)','DSGD (16 cores)','DSGD (24 cores)','GraphLab (16 cores)'},'Location','SouthEast');
title('TM: Data Scalability','FontSize',18);
set(gca,'FontSize',14);
print('-depsc','tm_data.eps');
system('epstopdf tm_data.eps');

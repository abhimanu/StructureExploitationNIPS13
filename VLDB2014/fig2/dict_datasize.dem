set style data linespoints
set term postscript eps enhanced color font 'Helvetica Bold,28' 
#set term postscript eps enhanced color font 'Helvetica,24' 

set termoption dashed

# define axis
# remove border on top and right and set color to gray
set style line 11 lc rgb '#303030' lt 1
set border 3 back ls 11
set tics nomirror

# define grid
set style line 12 lc rgb '#C0C0C0' lt 1 lw 1
set grid back ls 12


# color definitions
set style line 1 lc rgb '#E69F00' pt 9 ps 1.8 lt 1 lw 6 # --- orange
set style line 2 lc rgb '#56B4E9' pt 2 ps 1.4 lt 1 lw 6 # --- light blue
set style line 3 lc rgb '#009E73' pt 7 ps 1.4 lt 1 lw 6 # --- green
set style line 4 lc rgb '#F0E442' pt 4 ps 1.4 lt 1 lw 6 # --- yellow
set style line 5 lc rgb '#0072B2' pt 5 ps 1.4 lt 1 lw 6 # --- dark-blue
set style line 6 lc rgb '#D55E00' pt 6 ps 1.4 lt 1 lw 6 # --- dark-orange
set style line 7 lc rgb '#CC79A7' pt 3 ps 1.4 lt 1 lw 6 # --- magenta

set style line 21 lc rgb '#E69F00' pt 1 ps 1 lt 2 lw 6 # --- orange
set style line 22 lc rgb '#56B4E9' pt 2 ps 1 lt 1 lw 6 # --- light blue
set style line 23 lc rgb '#009E73' pt 7 ps 1.4 lt 2 lw 6 # --- green
set style line 24 lc rgb '#F0E442' pt 4 ps 1 lt 2 lw 6 # --- yellow
set style line 25 lc rgb '#0072B2' pt 5 ps 1 lt 2 lw 6 # --- dark-blue
set style line 26 lc rgb '#D55E00' pt 6 ps 1 lt 2 lw 6 # --- dark-orange
set style line 27 lc rgb '#CC79A7' pt 3 ps 1 lt 2 lw 6 # --- magenta


set output 'dict_datasize.eps'
set multiplot

#set terminal postscript eps color enhanced

set object 1 rect from graph 0.02, graph 0.5 to graph 0.58, graph 0.99 back
set object 1 rect fc rgb "white" fillstyle solid 1.0 noborder


set arrow from -1,-400 to 22,-400 lw 1 front nohead
set arrow from -1,-400 to -1,5500 lw 1 front nohead
set arrow from 22,-400 to 22,5500 lw 1 front nohead
set arrow from 22,5500 to -1,5500 lw 1 front nohead


set arrow from 50,13000 to 45,11500 lw 1 front filled
#set arrow from 8,11500 to 1.5,9000 lw 1 front filled
#set arrow from 14,11500 to 5.5,4000 lw 1 back filled
#set label "GraphLab and" at first 5,19000 textcolor rgb "black"
set label "GraphLab runs out" at first 5,16000 textcolor rgb "black"
set label "of memory" at first 6,14000 textcolor rgb "black"



set key bottom right invert  font 'Helvetica,24'  
#set key at 4500,0.25
#set key at 4500,0.25

#set yrange [0:1]
#set size 1,1
#set origin 0,0
#set title 'Whole plot'
set ylabel 'Time to converge (seconds)'
set xlabel 'Data size (GBs)'


#set output 'dict_datasize.eps'
#plot 'rank_speeds.txt' u 1:2 ls 3 t 'Ours (8 cores)', 'rank_speeds.txt' u 1:3 ls 3 t 'Ours (16 cores)', 'rank_speeds.txt' u 1:4 ls 5 t 'DSGD+ (8 cores)', 'rank_speeds.txt' u 1:5 ls 5 t 'DSGD+ (16 cores)', 'rank_speeds.txt' u 1:6 ls 4 t 'GraphLab'plot 'machines.txt' u 1:4 ls 4 t 'GraphLab', 'machines.txt' u 1:3 ls 5 t 'DSGD+', 'machines.txt' u 1:3 ls 3 t 'Ours'
#plot 'machines.txt' u 1:4 ls 4 t 'GraphLab', 'machines.txt' u 1:3 ls 5 t 'DSGD+', 'machines.txt' u 1:2 ls 3 t 'Ours'
#plot 'dict_datasize.txt' u 1:5 ls 6 t 'PSGD','dict_datasize.txt' u 1:4 ls 4 t 'GraphLab', 'dict_datasize.txt' u 1:3 ls 5 t 'DSGD+', 'dict_datasize.txt' u 1:2 ls 3 t 'Ours'
plot 'dict_datasize.txt' u 1:4 ls 1 t 'GraphLab', 'dict_datasize.txt' u 1:3 ls 5 t 'B. FlexiLearn', 'dict_datasize.txt' u 1:2 ls 3 t 'FlexiLearn'

unset object 1

# Now we set the options for the smaller plot
set size 0.5,0.4
set origin 0.18,0.59
#set title 'Zoom'
set title ''
set xrange [0:15]
set yrange [0:4000]
set xlabel ""
set ylabel ""
unset arrow
#set grid
set grid back ls 12
set border 3 back ls 11

#set format y '%.2e'
#set format y "10^{%L}"
#set ylabel "Y-AXIS" 2,0

#set ytics (0,1000,2000,3000,4000,5000)
set ytics (0,2500,5000)
set xtics (0,5,10,15)

set key off

plot 'lda_datasize2.txt' u 1:5 ls 2 t 'PSGD', 'lda_datasize2.txt' u 1:4 ls 1 t 'GraphLab', 'lda_datasize2.txt' u 1:3 ls 5 t 'B. FlexiLearn', 'lda_datasize2.txt' u 1:2 ls 3 t 'FlexiLearn'

# It's important to close the multiplot environment!!!
unset multiplot
